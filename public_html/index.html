<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">

		<link rel="stylesheet" href="https://tools-static.wmflabs.org/cdnjs/ajax/libs/twitter-bootstrap/4.1.2/css/bootstrap.min.css" integrity="sha384-Smlep5jCw/wG7hdkwQ/Z5nLIefveQRIY9nfy6xoR1uRYBtpZgI6339F5dgvm/e9B" crossorigin="anonymous">

		<title>text2hash - hash text right in your browser</title>
	</head>

	<body>
		<div class="main-wrapper">
			<nav class="navbar navbar-expand-md navbar-light bg-light">
				<div class="container">
				  <a class="navbar-brand" href="#">text2hash</a>
				  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
				    <span class="navbar-toggler-icon"></span>
				  </button>

				  <div class="collapse navbar-collapse" id="navbarSupportedContent">
				    <ul class="navbar-nav ml-auto">
				      <li class="nav-item">
				        <a class="nav-link" href="https://meta.wikimedia.org/wiki/User:Fastily">Author</a>
				      </li>
				      <li class="nav-item">
				        <a class="nav-link" href="https://github.com/fastily/text2hash-toollabs">Source</a>
				      </li>
				      <li class="nav-item">
				        <a class="nav-link" href="https://tools.wmflabs.org">Toolforge</a>
				      </li>
				    </ul>
				  </div>
				</div>
			</nav>

			<div class="container" id="app">
				<div class="jumbotron">
				  <h1 class="display-4">text2hash</h1>
				  <p class="lead">(The simple text hashing tool)</p>
				</div>

				<form>
					<div class="form-group">
						<label for="mainTextInput">First, type the text you want to hash here:</label>
						<textarea class="form-control" rows="3" id="mainTextInput" v-model="inputText"></textarea>
					</div>

					<div class="form-group">
						<label for="selectAlgBox">Next, choose your hashing alghorithm:</label>
						<select class="form-control" id="selectAlgBox" v-model="selectedAlg">
							<option v-for="v in vals" :key="v.name" :value="v.name">{{v.name}} ({{v.type}})</option> 
						</select>
					</div>

					<hr>
					<div class="card">
					  <div class="card-header">
					  	And here is your result:
					  </div>
					  <div class="card-body">
					    {{doHash()}}
					  </div>
					</div>
				</form>
			</div>
		</div>

		<script src="https://tools-static.wmflabs.org/cdnjs/ajax/libs/jquery/3.3.1/jquery.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
		<script src="https://tools-static.wmflabs.org/cdnjs/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
		<script src="https://tools-static.wmflabs.org/cdnjs/ajax/libs/twitter-bootstrap/4.1.2/js/bootstrap.min.js" integrity="sha384-o+RDsa0aLu++PJvFqy8fFScvbHFLtbvScb8AjopnFD+iEQ7wo/CG0xlczd+2O/em" crossorigin="anonymous"></script>
		<script src="https://tools-static.wmflabs.org/cdnjs/ajax/libs/vue/2.5.16/vue.min.js"></script>
		<script src="https://tools-static.wmflabs.org/cdnjs/ajax/libs/forge/0.7.5/forge.min.js"></script>
	</body>

	<script>
		new Vue({
			el: "#app",
			data: {
				vals: [ {name: "sha512", type: "strong"}, {name: "sha384", type: "better"}, {name: "sha256", type: "better"},
				 {name: "sha1", type: "weak"}, {name: "md5", type: "weak"} ],
				selectedAlg: "sha512",
				inputText: ""
			},
			methods: {
				doHash() {

					if(!this.inputText)
						return "";

					var md;
					switch(this.selectedAlg)
					{
						case 'md5':
							md = forge.md.md5.create();
							break;
						case 'sha1':
							md = forge.md.sha1.create();
							break;
						case 'sha256':
							md = forge.md.sha256.create();
							break;
						case 'sha384':
							md = forge.md.sha384.create();
							break;
						case 'sha512':
							md = forge.md.sha512.create();
							break;
						default:
							alert("Should never reach here?");
							break;
					}

					md.update(this.inputText, 'utf8');
					return md.digest().toHex();
				}
			}
		});
	</script>
</html>